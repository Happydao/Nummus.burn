<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>NUMMUS BURN — Live</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&display=swap" rel="stylesheet">

<style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
        font-family:'Cinzel', serif;
        color:#fff;
        background:black;
        overflow-x:hidden;
    }

    /* VIDEO SFONDO */
    #bgvid{
        position:fixed;
        top:0;left:0;
        width:100vw;
        height:100vh;
        object-fit:cover;
        z-index:-3;
        opacity:0.9;
    }

    #overlay{
        position:fixed;
        top:0;left:0;
        width:100vw;height:100vh;
        background:rgba(0,0,0,0.55);
        z-index:-2;
    }

    /* CARD TITOLO */
    .titleCard{
        width:90%;
        max-width:800px;
        margin:20px auto;
        background:rgba(20,20,20,0.55);
        border:2px solid rgba(180,140,70,0.5);
        border-radius:18px;
        padding:22px 20px;
        text-align:center;
        position:relative;
        backdrop-filter:blur(5px);
        box-shadow:0 0 20px rgba(0,0,0,0.6);
        transition:0.25s;
    }
    .titleCard:hover{
        border-color:rgba(140,20,20,0.8);
        box-shadow:0 0 30px rgba(80,0,0,0.7);
    }

    .title{
        font-size:32px;
        font-weight:800;
        color:#f0e6d0;
        letter-spacing:2px;
        text-shadow:0 2px 6px rgba(0,0,0,0.7);
    }

    /* LOGHI */
    .logo{
        position:absolute;
        width:80px;height:80px;
        top:50%;transform:translateY(-50%);
        filter:drop-shadow(0 0 3px #ff0000);
        animation:glow 1.6s infinite alternate ease-in-out;
    }

    #logoLeft{left:-70px;}
    #logoRight{right:-70px;}

    @keyframes glow{
        0%{filter:drop-shadow(0 0 4px #550000);}
        100%{filter:drop-shadow(0 0 12px #b30000);}
    }

    @media(max-width:700px){
        #logoLeft, #logoRight{
            width:55px;height:55px;
            left:-50px;right:-50px;
        }
        .title{font-size:24px;}
    }

    /* MAIN WRAPPER */
    #main{
        width:90%;
        max-width:1200px;
        margin:15px auto;
    }

    /* GITHUB */
    #githubBtn{
        position:fixed;
        top:15px;right:15px;
        background:rgba(40,40,40,0.65);
        border:1px solid rgba(255,255,255,0.25);
        padding:8px 12px;
        border-radius:10px;
        text-decoration:none;
        color:white;
        font-size:14px;
        backdrop-filter:blur(4px);
        transition:0.25s;
        z-index:50;
        text-shadow:0 2px 4px rgba(0,0,0,0.5);
    }
    #githubBtn:hover{
        color:#ff4444;
        border-color:#ff4444;
        box-shadow:0 0 12px rgba(100,0,0,0.6);
    }

    /* GRIGLIA CARDS */
    .cardsLayout{
        display:grid;
        grid-template-columns:1.5fr 1fr 1fr 1fr;
        gap:18px;
        margin-top:25px;
    }

    @media(max-width:1000px){
        .cardsLayout{
            grid-template-columns:1fr 1fr;
        }
    }

    @media(max-width:600px){
        .cardsLayout{
            grid-template-columns:1fr;
        }
    }

    /* CARD BASE */
    .card{
        background:rgba(18,18,18,0.55);
        border:2px solid rgba(180,140,70,0.45);
        border-radius:14px;
        padding:14px 16px;
        backdrop-filter:blur(4px);
        transition:0.25s;
        box-shadow:0 0 14px rgba(0,0,0,0.6);
    }

    .card:hover{
        border-color:rgba(130,30,30,0.75);
        box-shadow:0 0 20px rgba(80,0,0,0.7);
    }

    .card label{
        font-size:13px;
        color:#e5d7b2;
        text-shadow:0 2px 4px rgba(0,0,0,0.6);
    }

    .value{
        font-size:20px;
        font-weight:800;
        margin-top:4px;
        color:#fff;
        text-shadow:0 3px 5px rgba(0,0,0,0.8);
    }

    /* LINK BIANCO → ROSSO SCURO */
    .link{
        color:white;
        text-decoration:none;
        transition:0.25s;
    }
    .link:hover{
        color:#b22626;
    }

    /* TABELLA */
    table{
        width:100%;
        margin-top:25px;
        border-collapse:collapse;
        background:rgba(12,12,12,0.55);
        border-radius:12px;
        border:2px solid rgba(180,140,70,0.45);
        overflow:hidden;
        backdrop-filter:blur(4px);
        box-shadow:0 0 15px rgba(0,0,0,0.5);
    }

    thead{
        background:rgba(60,40,20,0.4);
    }

    th{
        padding:12px;
        color:#e5d7b2;
        font-size:14px;
        text-shadow:0 2px 4px rgba(0,0,0,0.6);
    }

    td{
        padding:12px;
        border-bottom:1px solid rgba(180,140,70,0.25);
        color:#fff;
        font-size:15px;
        text-shadow:0 2px 4px rgba(0,0,0,0.7);
    }

    tr:hover{
        background:rgba(90,0,0,0.25);
    }

</style>
</head>

<body>

<video id="bgvid" autoplay muted loop playsinline>
    <source src="burn.mp4" type="video/mp4">
</video>
<div id="overlay"></div>

<a id="githubBtn" href="https://github.com/Happydao/Nummus.burn" target="_blank">GitHub</a>

<div class="titleCard">
    <img src="nummus.png" class="logo" id="logoLeft">
    <img src="nummus.png" class="logo" id="logoRight">
    <div class="title">NUMMUS — BURN LIVE</div>
</div>

<div id="main">

    <!-- NUOVA GRIGLIA CARDS -->
    <div class="cardsLayout">

        <!-- COLONNA SINISTRA (più larga) -->
        <div class="card">
            <label>Total Burned</label>
            <div class="value" id="burnTotal">—</div>

            <label style="margin-top:14px;">Total USD Burned</label>
            <div class="value" id="burnUSD">—</div>
        </div>

        <!-- Burn Address -->
        <div class="card">
            <label>Burn Address</label>
            <div class="value">
                <a class="link" href="https://solscan.io/account/5G62fW1BuK6k9B6sGwvTBtoKRPseshj9SSYPzudSPUYE" target="_blank">
                    5G62fW1B…SPUYE
                </a>
            </div>
        </div>

        <!-- Supply -->
        <div class="card">
            <label>Total Supply</label>
            <div class="value" id="supply">—</div>
        </div>

        <!-- Price + Update -->
        <div class="card">
            <label>Nummus Price</label>
            <div class="value" id="priceNummus">—</div>

            <label style="margin-top:14px;">Last Update</label>
            <div class="value" id="update">—</div>
        </div>

    </div>

    <!-- TABELLA -->
    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>Amount</th>
                <th>Transaction</th>
            </tr>
        </thead>
        <tbody id="burnRows">
            <tr><td colspan="3" style="padding:20px;text-align:center;">Loading…</td></tr>
        </tbody>
    </table>

</div>

<script>
async function loadData(){
    try{
        const burn = await fetch("data/burn.json").then(r=>r.json());
        const price = await fetch("data/price.json").then(r=>r.json());

        document.getElementById("burnTotal").textContent =
            Number(burn.totalUi).toLocaleString();

        document.getElementById("burnUSD").textContent =
            Number(price.burnTotalUsd).toLocaleString("en-US",{style:"currency",currency:"USD"});

        document.getElementById("supply").textContent =
            Number(price.totalSupplyTokensNum).toLocaleString();

        document.getElementById("priceNummus").textContent =
            Number(price.priceUsd).toFixed(6)+" USD";

        document.getElementById("update").textContent =
            price.updatedAt ? new Date(price.updatedAt).toLocaleString() : "—";

        const tbody = document.getElementById("burnRows");
        tbody.innerHTML = "";

        burn.burns.forEach((b,i)=>{
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${i+1}</td>
                <td>${Number(b.amountUi).toLocaleString()}</td>
                <td><a class="link" href="${b.url}" target="_blank">Solscan</a></td>
            `;
            tbody.appendChild(tr);
        });

    }catch(e){
        console.error(e);
    }
}

loadData();
setInterval(loadData, 60000);
</script>

</body>
</html>
